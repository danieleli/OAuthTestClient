DROP TABLE [dbo].[UserProfile]

CREATE TABLE [dbo].[UserProfile] (
    [UserId] [int] NOT NULL IDENTITY,
    [UserName] [nvarchar](max),
    CONSTRAINT [PK_dbo.UserProfile] PRIMARY KEY ([UserId])
)
CREATE TABLE [dbo].[OAuthTokens] (
    [Token] [nvarchar](128) NOT NULL,
    [Secret] [nvarchar](max),
    [Provider] [nvarchar](max),
    [ProviderUserId] [nvarchar](max),
    [UserId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.OAuthTokens] PRIMARY KEY ([Token])
)
CREATE INDEX [IX_UserId] ON [dbo].[OAuthTokens]([UserId])
ALTER TABLE [dbo].[OAuthTokens] ADD CONSTRAINT [FK_dbo.OAuthTokens_dbo.UserProfile_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201301082338474_AutomaticMigration', 0x1F8B0800000000000400D559CD6EE33610BE17E83B083AB505D64AB27B48037B17A9931441EB781165F7BA60A4B14D942255920AEC67EBA18FD457E8507F964859969D64177BB348CEFF37C319FABF7FFE1D7F5827CC7B02A9A8E013FF7474E27BC0231153BE9CF8995EBC39F73FBCFFF187F1759CACBDCFD5B9B7E61C527235F1575AA71741A0A21524448D121A49A1C4428F2291042416C1D9C9C9AFC1E96900C8C2475E9E37BECFB8A609E41FF839153C82546784CD440C4C95EBB813E65CBD3B92804A4904133FA449CA6006C9232AB3A2E9A820F1BD4B4609AA13025BF85EFAEEE29382504BC197614A3425EC619302EE2F0853502A7F91BE1BAAFFC999D13F209C0B8DEC043FCA7EBFB60C6DBB461FE88D512BB76FE2A3C6F2A3140BCAA079108FFE019BD6022EE1C114A4DEDCC3A2417E1BFB5ED0A60D6CE29AD4A2339A4CFC5BAEDF9EF9DE5DC6187964503B0C3D1A6A21E177E0208986F823D11A2482E13686DC124772871CF3AB9284D14194F9DE0D5D43FC27F0A55ED5D266645DADE04FDFFBC429821289B4CCA0A95DF16D09BE234F749947C952E141FC051CB1720F2CDF36002A20339A5F667A95EF7F318AA25A5224F7C2C8B0B6BE3C10B9048D6688EEFD506432B2B41A07DB70F78260CBEC180C14840743A0243B282EA767E73D7129CFF723228448E68E7C653C5862F1F389C626C6DF48703BE3BE9AF861893E34978A2C795E265599B22B93AA4C1B9249974A8988E6CA38A95428D236EC9AC7DE1EAD8AF0B46DC298644CD394D1089598F8BF381EDBCDB82E1C5BC6CD9A6F713EF5ED7C9FF32B60A0C1BB8C747E0F4F898A48EC060D5D14B757B0448034759A30BC6D95968472EDD613CA239A12D6AFBF4576C0656454AB85D83B5790023777497F589E27BD1662396C9F7FC641035F6E01471A8D14201B0A28B3086BEDE0CE1084A0DD5B1F6FA62DB6BB00E220ADCD6AEBB12E4E4D0C5B8C1AB675712BF3B8716A47AADBEEDE9F63B50996F64EE4F667558355DBA77672B4ADED282D7534B78D685074A255C71AEC6859C73392A658CD1B2D6CB9E28545FF3A7D131EDE3A26058F20521D1D64AD6D2D09FB34B2046B1745A3A637542A7D45347924A6D84FE3C4393604BB95A80E08BB81AB70581199DF6503D0DDCC8F7676C24D8FDEA091892917795FDA1D7D973A1F2A082372C7E538152C4B787F19E9E752F4B8369F62D5E5340E2C739C92E538D0A9F5EDA00C0A5933D95E2262BBDAD64101EB23DEE5E9B29035DDDC59DBFA7854FD679349B5369CCBB69D6CF2D9AE1ECEA90B8BF6DE61981C8EEC57C5A35360ED23B5F4BAD05A05755C16B7FD0F054EB52B8EF85EE5498CF546694846E6C028FC9B4D19457BB7076684D305289DE36AE263313EB79E198E780208948AD977F00E408D27F64EFC070E7CF613007F22325A11F95342D63FF78F33DFD1005D59E58ECBCF9A8F0F70D6FE99F74598B511F32C961DE0EB75D6CB4F81AD46FB1B4C685D0DEED133E851E35E7FD7F5CA33DEF731D7B92DF4E0E16EDF6C575C4F133F7E1418F602F8C70D7F7B66BF2E413DB3D757180E3BBCE434F2C326C21D03E5EBCC806E2B82786BFCB381685774B96561FEE7E010B590569FB9E50B5101DED2A83A6295CC196812230C2FA5A60B1269DC8E40A9FC2DF13361191EB9C6363DBEE5F34CA7994693B16D67AD777A93387DF2F341B7ADF3789EE60F7E2F6102AA49D10498F3DF32CAE25AEF9B8E82BF8385C9C8B24331B1D4A653596E6A4E77820F6454BAAF2E240F80930E3253731E9227D8ADDB7E1FB63D36BEA2642949A24A1E5B7AFC44F8C5C9FAFDFF7B8499769B1B0000, '5.0.0.net45')
